<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <ui:composition template="/templates/navbar.xhtml">
        <ui:define name="title">Store Page</ui:define>
        <ui:define name="content">
            <div class="ui-grid ui-grid-responsive">
                <div class="ui-grid-row">
                    <div class="ui-grid-col-6" id="center">
	                    <h:form>
	                    	<p:dataTable id="allTheInventory" var="product" value="#{storeHomeBean.allProducts}">
	                    		<p:column headerText="Name">
	                    			<h:outputText value="#{product.name}" />
	                    		</p:column>
	                    		
	                    		<p:column headerText="Description">
	                    			<h:outputText value="#{product.description}" />
	                    		</p:column>
	                    		
	                    		<p:column headerText="Price">
	                    			<h:outputText value="#{product.price}" />
	                    		</p:column>
	                    		
	                    		<p:column headerText="Add To Cart">
	                    			<p:commandButton value="Add to cart" id="addToCartBtn" action="#{storeHomeBean.addItemToCart(product)}" update="msg:cartMessage cart:myCart" />
	                    		</p:column>
	                    	</p:dataTable>
	                    </h:form>
	                    
	                    <h:form id="msg">	
	                    	<p:growl id="cartMessage" showDetail="true" sticky="false" />
	                    </h:form>
                    </div>
                    
                    <div class="ui-grid-col-6" id="right">
                    	<h:form id="cart">
                    		<p:dataTable id="myCart" var="cartProduct" value="#{storeHomeBean.itemsInCart}">
                    			<p:column headerText="Name">
                    				<h:outputText value="#{cartProduct.name}" />
                    			</p:column>
                    			
                    			<p:column headerText="Description">
                    				<h:outputText value="#{cartProduct.description}" />
                    			</p:column>
                    			
                    			<p:column headerText="Price">
                    				<h:outputText value="#{cartProduct.price}" />
                    			</p:column>
                    			
                    			<p:column headerText="Remove From Cart">
                    				<p:commandButton value="Remove from cart" id="removeFromCartBtn" action="#{cartImpl.removeProductFromCart(cartProduct)}" update="myCart"/>
                    			</p:column>
                    		</p:dataTable>
                    	</h:form>
                    </div>
				</div>
				
				<div class="ui-grid-row">
                    <div class="ui-grid-col-12">
                    	<p:link outcome="processcheckout" icon="fa-shopping-cart" value="Process Checkout" />
                    </div>
                </div>
            </div>
        </ui:define>
    </ui:composition>
</html>